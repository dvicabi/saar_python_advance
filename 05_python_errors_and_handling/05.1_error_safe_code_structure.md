# 📘 איך לכתוב קוד עמיד לשגיאות – מבנה כללי, else, finally, וטיפים מקצועיים

## ✨ הסבר
כדי לבנות תוכנות יציבות, אנחנו לא רק רוצים "לתקן שגיאות" – אלא **למנוע קריסה מראש**. 

בפייתון יש דרך אלגנטית להגן על קוד רגיש באמצעות בלוקים של `try`/`except`, וגם תוספות כמו `else` ו־`finally`. 

נבין איך כותבים קוד שמגן על עצמו – ונותן תגובות ברורות למשתמש או למערכת.

## 🧠 מה נלמד בפרק הזה?
- מבנה כללי של טיפול בשגיאות
- מתי להשתמש ב־`else` ו־`finally`
- איך לתפוס סוגים מרובים של שגיאות
- דגשים חשובים על הסדר והדיוק
- איך לכתוב "קוד בטוח" בתרגול אמיתי

## 🔍 הסברים ודוגמאות

### 🧱 מבנה בסיסי

```python
try:
    # קוד שעלול להיכשל
except SomeError:
    # טיפול בשגיאה
````

---

### ➕ הוספת else – רק אם לא הייתה שגיאה

```python
try:
    x = 10 / 2
except ZeroDivisionError:
    print("Can't divide by zero")
else:
    print("Division successful:", x)
```

💡 ה־`else` יופעל רק אם ה־`try` עבר בהצלחה.

---

### ✅ שימוש ב־finally – תמיד יקרה

```python
try:
    f = open("file.txt")
    # פעולות עם הקובץ
finally:
    f.close()
```

🔁 ה־`finally` קורה **בין אם הייתה שגיאה או לא**
🧠 שימושי לשחרור משאבים – קבצים, חיבורי רשת, בסיסי נתונים.

---

### 🎯 טיפול מרובה בשגיאות

```python
try:
    x = int(input("Enter a number: "))
    y = 10 / x
except ZeroDivisionError:
    print("Division by zero not allowed.")
except ValueError:
    print("Please enter a valid integer.")
except Exception as e:
    print("Something went wrong:", e)
```

💡 **תמיד תתחיל מהשגיאות הספציפיות – ורק בסוף `Exception` כללי**

---

### ❌ טעות נפוצה: except ללא סוג

```python
try:
    ...
except:
    print("Error")  # לא טוב – תופס גם שגיאות קריטיות של מערכת
```

🛑 תוצאה: הקוד ימשיך כשלא כדאי לו – ועלול להוביל לקריסה נסתרת

---

### 🧠 תיעוד נכון של שגיאות

```python
import logging

try:
    ...
except Exception as e:
    logging.error(f"Error occurred: {e}")
```

📌 מעולה לפרויקטים רציניים בהם חשוב לדעת מה קרה ומתי.

---

## 💡 טיפים מתקדמים

* שים לב: `try` קצר מדי לא אפקטיבי – כדאי לעטוף **בלוק משמעותי** של קוד.
* הוסף תמיד **פלט ברור למשתמש** במידה של שגיאה.
* השתמש ב־`raise` בתוך `except` אם אתה רוצה להעביר את השגיאה הלאה.
* בדיקות חשובות לפני הריצה: האם קובץ קיים, האם ערך חוקי, האם חלוקה מותרת.

---

## ✅ בדוק את עצמך

1. מתי נשתמש ב־`finally`?
2. מה היתרון של `else` בתוך מבנה try/except?
3. למה חשוב לתעד שגיאות ולא רק להדפיס?
