# 📘 החלקת סדרות זמן (Smoothing) – ממוצעים נעים, EMA, וקונבולוציה

## ✨ הסבר
סדרות זמן אמיתיות נוטות להכיל **רעש** – תנודות קטנות שמקשות על זיהוי מגמות ועונתיות. 

כדי להבין את הסדרה לעומק, נרצה לעיתים **להחליק** אותה – להסיר רעש תוך שמירה על צורת האות הכללית. 

לשם כך נשתמש בטכניקות כמו ממוצע נע (SMA), ממוצע אקספוננציאלי (EMA), וקונבולוציה.

## 🧠 מה נלמד בפרק הזה?
- למה נרצה להחליק סדרת זמן
- איך ממוצע נע עובד ומה יתרונותיו
- איך עובד ממוצע אקספוננציאלי ולמה הוא "רגיש יותר"
- קונבולוציה כדרך כללית להחלקה
- מתי משתמשים בכל אחת מהשיטות

## 🔍 הסברים ודוגמאות

### 🔁 ממוצע נע (SMA – Simple Moving Average)

> בכל נקודה מחשבים את ממוצע הערכים שלפניה

```python
df["SMA_5"] = df["value"].rolling(window=5).mean()
````

🔍 גורם להחלקה, אך מייצר **עיכוב** – תוצאה מאוחרת מהמקור

---

### 📉 ממוצע אקספוננציאלי (EMA – Exponential Moving Average)

> שיטה שנותנת משקל **גבוה יותר לערכים האחרונים**

```python
df["EMA_5"] = df["value"].ewm(span=5, adjust=False).mean()
```

🔹 מגיב לשינויים מהר יותר מ־SMA
🔹 מתאים לזיהוי שינויים בזמן אמת

---

### 🔄 קונבולוציה (Convolution)

> שילוב של הסדרה עם "פילטר" קבוע – גמיש ועוצמתי

```python
import numpy as np
kernel = np.ones(5) / 5
smoothed = np.convolve(df["value"], kernel, mode='valid')
```

🔍 מאפשר עיצובים מותאמים – לא רק ממוצע פשוט

---

### 📈 השוואה גרפית

```python
import matplotlib.pyplot as plt

plt.plot(df["value"], label="Original")
plt.plot(df["SMA_5"], label="SMA")
plt.plot(df["EMA_5"], label="EMA")
plt.legend()
plt.show()
```

---

## 💡 טיפים מתקדמים

* SMA טוב לניתוח מגמות כלליות; EMA טוב לאיתור שינויים מהירים.
* החלקה עוזרת **להעלים רעש**, אך עלולה **לטשטש תופעות אמיתיות** – השתמש בזהירות.
* אפשר לבצע החלקה גם על תדרים (FFT) – לא רק על הזמן.

---

## ✅ בדוק את עצמך

1. מה היתרון של EMA על פני SMA?
2. כיצד תחשב ממוצע נע של 7 ימים?
3. מתי כדאי להשתמש בקונבולוציה ולא ב־SMA/EMA?
