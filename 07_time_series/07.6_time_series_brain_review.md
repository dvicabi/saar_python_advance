# 📘 סיכום מתקדם – Time Series במוח: פילטרים, ERP, ותובנות יישומיות

## ✨ הסבר
כאשר מנתחים סדרות זמן בעולם מדעי המוח – למשל EEG או ECOG – נדרשת התמקדות מיוחדת בטכניקות כמו **פילטרים, תיאום זמני בין ערוצים**, וזיהוי תגובות מוחיות לאירועים (ERP). 

נסקור כעת איך כל מה שלמדנו על סדרות זמן מתחבר ליישום מוחשי בעולם הנוירולוגיה.

## 🧠 מה נלמד בפרק הזה?
- מה זה ERP ולמה הוא חשוב
- איך משתמשים בפילטרים לניקוי והדגשה
- חשיבות התיאום בין ערוצים (Resampling, Sync)
- איך מוצאים רגעים חשובים באות המוחי
- דוגמה של תגובה לגירוי כמו תנועה או קול

## 🔍 הסברים ודוגמאות

### ⚡ מה זה ERP?

> **Event Related Potential** – תגובה מוחית בזמן קבוע לאחר גירוי (Stimulus)

📌 לדוגמה:
- צפצוף → עלייה באות באזור שמיעתי תוך 100ms
- תזוזת אצבע → פעילות מוטורית באזור S1/M1

---

### 🧠 איך מזהים ERP?

- מבצעים **תיאום בין הגירוי לבין האות**
- גוזרים קטעי אות לפי Time Lock:
```text
Stimulus בזמן 10s → חותכים את האות מ־9.5s עד 10.5s
````

* ממוצעים מאות תגובות יחד → ביטול רעש → דפוס ERP ברור

---

### 🔍 פילטרים תומכים

* `bandpass` בין 1–40Hz → מסנן רעשי תנועה וחשמל
* `notch` ב־50Hz → מסיר רעש חשמלי מהשקע

```python
from scipy.signal import butter, filtfilt

# Bandpass
b, a = butter(2, [1, 40], btype='band', fs=250)
filtered = filtfilt(b, a, signal)
```

---

### 🧭 תיאום בין ערוצים – Resampling

* לעיתים יש רישומים ממקורות שונים (EEG, תנועה, קול)
* צריך **לסנכרן אותם לפי תדר דגימה**
* לדוגמה: EEG ב־250Hz, אבל האודיו ב־44kHz → נדרש Resample

---

### 📍 איתור רגע משמעותי (onset)

* מציאת שיא – באמצעות `find_peaks`
* או זיהוי שינוי פתאומי (נגזרת, `np.diff`)
* או חציית סף קבוע

```python
from scipy.signal import find_peaks
peaks, _ = find_peaks(filtered, height=10)
```

---

### 📊 גרף ממוצע ERP

```python
import matplotlib.pyplot as plt

plt.plot(avg_erp)
plt.axvline(x=0, color='r', linestyle='--')  # זמן הגירוי
plt.title("ERP – תגובה לגירוי חזותי")
```

---

## 💡 טיפים מתקדמים

* ERP רואים **רק אחרי ממוצע של הרבה ניסויים** – הסינגל רועש מדי לבד
* ERP שונה בין אזורים – לכן חשוב לבחור ערוץ/אלקטרודה מתאימה
* תחום הזמן הקריטי הוא לרוב **0–600ms** אחרי גירוי

---

## ✅ בדוק את עצמך

1. מה זה ERP וכיצד מחשבים אותו?
2. למה חייבים לבצע סינון לפני ניתוח EEG?
3. כיצד ניתן לסנכרן EEG עם מערכת חיצונית?
