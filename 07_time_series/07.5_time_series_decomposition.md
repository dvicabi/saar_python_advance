# 📘 פירוק סדרות זמן – דקומפוזיציה ל־Trend, Seasonality, Residual

## ✨ הסבר
סדרת זמן מורכבת לרוב ממספר רכיבים שונים – מגמה, עונתיות, ורעש – שכל אחד מהם מספר סיפור אחר. 

**דקומפוזיציה** (פירוק) היא תהליך שבו מפרקים את הסדרה לרכיבים אלו כדי להבין מה משפיע על ההתנהגות הכללית. 

כך ניתן לזהות דפוסים חבויים, להחליק רעש, ולשפר תחזיות.

## 🧠 מה נלמד בפרק הזה?
- מהם הרכיבים של סדרת זמן
- מהו ההבדל בין מודל Additive ל־Multiplicative
- איך לבצע דקומפוזיציה בפועל עם `seasonal_decompose`
- כיצד לקרוא את הגרפים שמתקבלים
- מתי הפירוק עוזר לנו להבין טוב יותר את הדאטה

## 🔍 הסברים ודוגמאות

### 🔎 רכיבי סדרת זמן

| רכיב       | תיאור                                 |
|------------|----------------------------------------|
| Trend      | מגמה ארוכת טווח (עולה / יורדת)         |
| Seasonality| תבנית חוזרת בזמן קבוע (חודש, שבוע...) |
| Residual   | השאריות – רעש או סטיות נקודתיות        |

---

### ➕ מודלים של פירוק

- **Additive** – כל רכיב מתווסף:
```text
סדרה = מגמה + עונתיות + שארית
````

* **Multiplicative** – הרכיבים מוכפלים:

```text
סדרה = מגמה × עונתיות × שארית
```

📌 בוחרים לפי האם עוצמת העונתיות משתנה עם ערכי הסדרה.

---

### 🛠 ביצוע בפועל

```python
from statsmodels.tsa.seasonal import seasonal_decompose

result = seasonal_decompose(df["value"], model="additive", period=12)
result.plot()
```

---

### 📈 פירוש הגרף

* **Trend** – הקו החלק שעולה/יורד
* **Seasonal** – תבנית מחזורית (נניח חודשי)
* **Residual** – הרעש שנותר אחרי ההסרה

---

### 📊 מתי זה עוזר?

* להבין **מה מקבע את הצורה** של הסדרה
* להסיר רעש או עונתיות לפני תחזית
* לגלות פתאום מגמה שלא הייתה ברורה קודם

---

## 💡 טיפים מתקדמים

* מומלץ לנרמל את הסדרה לפני הפירוק (ממוצע 0, סטיית תקן 1)
* פירוק Additive קל יותר לפרשנות, Multiplicative מדויק יותר לסדרות כלכליות או ביו־רפואיות
* תמיד בדוק אם העונתיות **תלויה בעוצמה** – זה רמז לבחירת מודל

---

## ✅ בדוק את עצמך

1. מהו ההבדל בין Trend ל־Seasonality?
2. מתי עדיף להשתמש בפירוק Multiplicative?
3. מה נותר ב־Residual לאחר הפירוק?
