# 📘 זיהוי חריגות בסדרות זמן – Outliers, זיהוי שינוי מגמה, ואיתותים חריגים

## ✨ הסבר
במהלך ניתוח סדרת זמן, לעיתים מופיעים **ערכים יוצאי דופן** – קפיצות, נפילות, או דפוסים שמשנים כיוון. 

אלו נקראים **חריגות (Anomalies)**, ויש להן חשיבות קריטית: הן יכולות להצביע על תקלות, אירועים משמעותיים, או מידע כוזב. 

נלמד איך לזהות חריגות, מתי הן חשובות, ואיך לא לטעות בזיהוי.

## 🧠 מה נלמד בפרק הזה?
- מהי חריגה ואיך היא שונה מרעש
- שיטות סטטיסטיות לזיהוי Outliers
- זיהוי שינוי מגמה פתאומי
- השוואה בין ערך נוכחי לערכים היסטוריים
- איך לא לבלבל בין חריגה לבין עונתיות

## 🔍 הסברים ודוגמאות

### ⚠️ מהי חריגה?

> חריגה = ערך שלא מתאים להתנהגות הרגילה של הסדרה

📌 דוגמה:
- פתאום דופק קופץ ל־200
- ירידה חדה בהכנסות ביום אחד
- שיא תדר ב־EEG שמעולם לא הופיע

---

### 📊 זיהוי סטטיסטי – Z-Score

```python
from scipy.stats import zscore

df["z"] = zscore(df["value"])
df["outlier"] = df["z"].abs() > 2.5
````

🔹 ערכים עם `|z| > 2.5` לרוב נחשבים חריגים (ניתן לשנות לסף אחר)

---

### 🧮 שיטות נוספות:

#### 1. השוואה לממוצע נע:

```python
df["residual"] = df["value"] - df["value"].rolling(7).mean()
```

#### 2. אחוז שינוי פתאומי:

```python
df["pct_change"] = df["value"].pct_change()
```

---

### 🔍 שינויים במגמה (Trend Shift)

> שינוי פתאומי בכיוון – לאו דווקא ערך קיצוני בפני עצמו

📌 זיהוי ע"י גרף + החלקה (SMA/EMA)
📌 שימוש ב־breakpoint detection או derivative (נגזרת)

---

### 🎯 מתי חריגה באמת "משמעותית"?

* אם היא משפיעה על מגמה ארוכה
* אם היא נמשכת לאורך זמן
* אם היא חוזרת בעקביות
* אם היא חורגת גם מבחינה עסקית/ביולוגית/מחקרית

---

### ❌ טעות נפוצה: בלבול בין חריגה לעונתיות

* קפיצה שחוזרת כל יום שני = **עונתיות**
* קפיצה פתאומית רק פעם אחת = **חריגה**

🔎 השתמש ב־seasonal decomposition כדי להבדיל

---

## 💡 טיפים מתקדמים

* חריגה אחת בודדת → אפשר להסיר/לסמן
* חריגה חוזרת → כנראה תופעה אמיתית שדורשת הבנה
* ויזואליזציה תמיד עוזרת: `line plot` עם סימון נקודות חריגות

---

## ✅ בדוק את עצמך

1. מה ההבדל בין רעש לחריגה?
2. כיצד ניתן לזהות שינויים פתאומיים במגמה?
3. למה לא תמיד כדאי להסיר חריגות אוטומטית?
